
<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8">
    <title>寫給大家的 Git 教學 2nd Impact - 小鎮遊跡</title>
    <meta name="author" content="Hsiao-Ting Yu (Littlebtc)">

    
    <meta name="description" content="寫給大家的 Git 教學 第三版，2012 Littlebtc (Hsiao-Ting Yu) 改寫自 Scott Chacon 的「Pro Git」電子書。 Part 1 Why Git 為什麼要版本控制？為什麼要用 Git？ 這是程式設計師的日常 當你寫了一個新東西，卻發生了以下的悲劇&# &hellip;">
    
    <meta name="viewport" content="width=device-width; initial-scale=1; maximum-scale=1">

    <link href="/atom.xml" rel="alternate" title="小鎮遊跡" type="application/atom+xml">
    <link rel="canonical" href="">
    <link href="/favicon.png" rel="shortcut icon">
    
    <!--[if lt IE 9]><script src="/javascripts/html5.js"></script><![endif]-->
    <script src="/javascripts/jquery.min.js"></script>
    
<script src="/javascripts/modernizr.custom.js"></script>
<script src="/javascripts/deck.core.js"></script>
<script src="/javascripts/deck.hash.js"></script>
<link rel="stylesheet" href="/stylesheets/deck.core.css" type="text/css">
<link rel="stylesheet" href="/stylesheets/deck.hash.css" type="text/css">
<link rel="stylesheet" href="/stylesheets/deck.js-themes/style/littlebtc.css" type="text/css">
<link rel="stylesheet" href="/stylesheets/deck.js-themes/transition/horizontal-slide.css" type="text/css">

<script src="/javascripts/jquery.anystretch.min.js"></script>

    
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-29719621-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>


<body class="deck-container">
  <section class="slide">
  <div class="vcenter">
    <h1>寫給大家的 Git 教學</h1>
    <p>第三版，2012</p>
    <p>Littlebtc (Hsiao-Ting Yu)</p>
    <p style="font-weight: normal; font-size: 80%;">改寫自 Scott Chacon 的「<a href="http://progit.org/book/" target="_blank">Pro Git</a>」電子書。<a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/"><img alt="Creative Commons License" style="border-width: 0" src="http://i.creativecommons.org/l/by-nc-sa/3.0/80x15.png" /></a></p>
  </div>
</section>
<section class="slide">
  <div class="vcenter">
    <p>Part 1</p>
    <h2>Why Git</h2>
    <p>為什麼要版本控制？為什麼要用 Git？</p>
  </div>
</section>
<section class="slide">
  <h2>這是程式設計師的日常</h2>
  <p>當你寫了一個新東西，卻發生了以下的悲劇&#8230;</p>
  <ul>
    <li>忘了自己改了哪些地方</li>
    <li>把舊的東西改壞了，改不回來</li>
    <li>拿去跟別人的成果合併，卻兜不起來</li>
  </ul>
  <p>→有沒有辦法解決？</p>
</section>
<section class="slide">
  <h2>有！「版本控制系統」</h2>
  <p>當你使用版本控制系統時：</p>
  <ul>
    <li><span style="color: #AAAAAA;">忘了自己改了哪些地方</span>→每次的更動都會被記錄下來</li>
    <li><span style="color: #AAAAAA;">把舊的東西改壞了，改不回來</span>→可以隨時退回到過去的版本</li>
    <li><span style="color: #AAAAAA;">拿去跟別人的成果合併，卻兜不起來</span>→提供機制處理多人協作的衝突</li>
  </ul>
  <p>→「凡走過必留下痕跡」、「三個臭皮匠，勝過一個諸葛亮」，這就是版本控制的精神。</p>
</section>
<section class="slide">
  <h2>版本控制系統的演進</h2>
  <ul>
    <li>單機式（rcs）</li>
    <li>中心式（CVS、Subversion）</li>
    <li>分散式（Git、Mercurial、Bazaar）</li>
  </ul>
</section>
<section class="slide">
  <h2>版本控制系統的演進</h2>
  <img src="git/local-vcs.png" style="float: right;">
  <h3>單機式</h3>
  <p>為了達成「凡走過必留下痕跡」：</p>
  <ul>
    <li>本機中建立一個資料庫</li>
    <li>記下每個檔案的版本變更</li>
  </ul>
  <p><code>rcs</code> (1982) 屬於此類（至今還有人使用！）</p>
  <p>→問題：兩人以上協作時，如何同步每個人的版本資料庫？</p>
</section>
<section class="slide">
  <h2>版本控制系統的演進</h2>
  <img src="git/centralized-vcs.png" style="float: right;">
  <h3>中心式</h3>
  <p>為了讓三個臭皮匠可以一起作業：</p>
  <ul>
    <li>版本資料庫放在中心統一控管</li>
    <li>每個人從中心取出（Checkout）東西</li>
    <li>修改完後將內容提交（Commit）回中心</li>
  </ul>
  <p>早期盛行<code>CVS</code> (1990)、現在主流為 <code>Subversion</code> (2000)</p>
  <p>→中心一旦故障，大家的作業都會出問題，該怎麼辦？</p>
</section>
<section class="slide">
  <h2>版本控制系統的演進</h2>
  <img src="git/distributed-vcs.png" style="width: 300px; float: right;">
  <h3>分散式</h3>
  <p>&#8230;何不讓每個人都有一份完整的資料庫？</p>
  <ul>
    <li>「大家都能獨立工作」</li>
    <li>「Server 爛了？不要緊，拿到一份好的資料庫灌回去就可以全部復原！」</li>
  </ul>
  <p><code>Git</code> (2005) 是主流、<code>Mercurial</code> (2005) 跟 <code>Bazaar</code> (2005) 也很盛行</p>
  <p>→又來了：怎麼解決每個人之間的同步問題？<br>引進非線性的開發模式！</p>
</section>
<section class="slide">
  <h2>Git 的歷史</h2>
  <p>簡言之：為了解決 Liunx 核心的開發問題，所以有了 Git</p>
  <ul>
    <li>過去，Linux 核心開發沒有使用版本控制系統（主因是 Linus Torvalds 不喜歡中心式的系統）。</li>
    <li>2002 年，開始改用專有的分散式版本控制系統 BitKeeper，讓自由軟體/開源社群不滿<small>（自由的東西用非自由的開發工具，成何體統？）</small>。</li>
    <li>2005 年 BitKeeper 跟 Linux 開發團隊鬧翻，不再免費供應系統。Git 的開發自此開始。</li>
  </ul>
</section>
<section class="slide">
  <h2>Git 的強項</h2>
  <ul>
    <li>快</li>
    <li>簡單</li>
    <li>非線性開發<br>（分支、合併、不受單一主線拘束）</li>
    <li>完全分散式</li>
    <li>處理超大資料的能力<br>（Linux 核心的程式碼超過一千萬行！）
    </li>
  </ul>
</section>
<section class="slide">
  <h2>這些專案都在用 Git</h2>
  <ul>
    <li>Linux Kernel</li>
    <li>Android</li>
    <li>GNOME</li>
    <li>KDE</li>
    <li>PHP <small>(Since 2012)</small></li>
    <li>Ruby on Rails</li>
    <li>django</li>
  </ul>
</section>
<section class="slide">
  <div class="vcenter">
    <p>Part 2</p>
    <h2>Setup Git</h2>
    <p>設定屬於你的 Git 開發環境。</p>
  </div>
</section>
<section class="slide">
  <h2>設定 Git</h2>
  <p>Git 的操作大部分都是透過命令列，但也有許多的圖形介面工具。</p>
  <p>無論如何，以下的設定都是必要的：</p>
  <ul>
    <li>安裝 Git 軟體<br>這不用說了吧 XD</li>
    <li>產生一個 SSH 金鑰<br>為什麼？因為 Git 可以利用 SSH 進行使用者驗證</li>
    <li>調整 Git 的組態<br>設定姓名和電子郵件地址</li>
  </ul>
</section>
<section class="slide">
  <h2>有懶人包幹嘛不用？</h2>
  <p>GitHub 他們寫了三種平台下安裝 Git 的懶人包，以下提供連結：</p>
  <ul>
    <li>Windows：<a href="http://help.github.com/win-set-up-git/" target="_blank">http://help.github.com/win-set-up-git/</a></li>
    <li>MacOS X：<a href="http://help.github.com/mac-set-up-git/" target="_blank">http://help.github.com/mac-set-up-git/</a></li>
    <li>Linux：<a href="http://help.github.com/linux-set-up-git/" target="_blank">http://help.github.com/linux-set-up-git/</a></li>
  </ul>
  <p>「Add your SSH key to GitHub」這個步驟是 GitHub 的設定，可以跳過去 :)</p>
</section>
<section class="slide">
  <h2>Windows</h2>
  <p>照上面懶人包安裝後，您會把 Git for Windows 安裝好。</p>
  <p>Git for Windows 有兩種不同的使用方式：</p>
  <ul>
    <li>Git Bash：一個 Bash Shell，你可以在裡頭以命令列方式使用 Git。</li>
    <li>Git GUI：一個簡單的圖形使用介面。</li>
  </ul>
  <h3>圖形介面工具推薦</h3>
  <ul>
    <li><a href="http://code.google.com/p/tortoisegit/" target="_blank">TortoiseGit</a><br>免費，在檔案總管下使用，需先安裝 Git for Windows</li>
    <li><a href="http://code.google.com/p/gitextensions/" target="_blank">Git Extensions</a>（免費）</li>
    <li><a href="http://www.syntevo.com/smartgit/index.html" target="_blank">SmartGit</a>（跨平台，非商業使用免費）</li>
  </ul>
</section>
<section class="slide">
  <h2>MacOS X</h2>
  <p>安裝完後在「工具程式」→「終端機」以命令列使用 Git。</p>
  <p>（Mac 下另外建議您使用 <a href="http://www.iterm2.com/" target="_blank">iTerm 2</a> 取代內建的終端機程式）
  <h3>圖形介面工具推薦</h3>
  <ul>
    <li><a href="http://www.gitx.org/" target="_blank">GitX</a><br>免費，有只能瀏覽歷史和 Commit 的原始版，和後人改過的全方位版</li>
    <li><a href="http://mac.github.com/" target="_blank">GitHub for Mac</a><br>免費，也能用於非 GitHub 托管專案喔！<br>但對於 Branch 的管理較為簡化，使用上要注意。</li>
    <li><a href="http://www.git-tower.com/" target="_blank">Tower</a>（USD $59）</li>
  </ul>
</section>
<section class="slide">
  <h2>Linux</h2>
  <p>在終端機中以命令列使用 Git。</p>
  <h3>圖形介面工具推薦（GNOME）</h3>
  <ul>
    <li><a href="http://www.rabbitvcs.org/" target="_blank">RabbitVCS</a><br>免費，Nautilus 檔案管理員下操作<br>Ubuntu 12.04 內附的版本沒有 Git 支援，請參照官網設定 PPA 安裝</li>
    <li><a href="http://git.gnome.org/browse/gitg/">gitg</a><br>GitX 的 GNOME fork</li>
    <li><a href="http://live.gnome.org/giggle">giggle</a></li>
  </ul>
</section>

<section class="slide">
  <div class="vcenter">
    <p>Part 3</p>
    <h2>Git Basics</h2>
    <p>介紹如何建立一個 Git 的 Repository，並在其中新增新的 Commit。</p>
  </div>
</section>
<section class="slide">
  <h2>所有事都能單獨在本機進行！</h2>
  <img src="git/git-local.png" style="float: left; margin-right: 50px;">
  <ul>
    <li>你不只有一份完整的資料庫&#8230;&#8230;</li>
    <li>閱讀版本歷史、提交變更這些動作都可以在本機進行</li>
    <li>不需要網路連線也能單獨工作！</li>
  </ul>
</section>
<section class="slide">
  <h2>建立 Repository</h2>
  <ul>
    <li>「Repository」（倉庫、套件庫）是 Git 對版本資料庫的稱呼。</li>
    <li>下達 <code>git init</code> 後，會在該目錄裡建立一個 Repository。</li>
    <li>Repository 所需的檔案會放置在 <code>.git</code> 目錄之中。<br>（因此，千萬不要誤砍了！）</li>
  </ul>
    <p>為了方便解說，以下操作全部都在命令列下進行。<br>若使用圖形介面，請試著找出相同的使用方法吧！</p>
</section>
<section class="slide">
  <h2>建立 Repository</h2>
  <p><strong>範例：</strong>建立一個空的目錄叫 playground，在那裡建立 Git Repository：</p>
  <ul>
    <li><code>mkdir playground</code></li>
    <li><code>cd playground</code></li>
    <li><code>git init</code></li>
  </ul>
  <p><strong>Tips：</strong> 其實也可以用 <code>git init playground</code> 一次建空目錄和 Repository</p>
</section>
<section class="slide">
  <h2>基本觀念：Commit</h2>
  <ul>
    <li>版本控制就是<strong>把當時 Repository 內所有檔案的現狀</strong>作記錄與控制。</li>
    <li>而在 Git 之中，每一次的「現狀紀錄」稱之為 <strong>Commit</strong>。</li>
    <li>Commit 中也包含作者、時間、紀錄資訊（Log）、前後對應 Commit 等資訊，方便追蹤管理。</li>
  </ul>
  <img src="git/commit-example.png">
</section>
<section class="slide">
  <h2>基本觀念：Staging</h2>
  <ul>
    <li>在您的目錄（稱為 <strong>Working Directory</strong>，工作中目錄）之中作業。</li>
    <li><strong>唯有放進 Staging Area</strong>（暫存區）<strong>裡的更動</strong>會被 Commit。</li>
    <li>為什麼？(1) 多項目同時作業下，可以分開切成多個 Commit，方便管理。 (2) 不用擔心未完成或暫存的東西影響到 Commit。</li>
    <li>就算是同一檔案，也可以只有某幾行加入 Staging 中！</li>
  </ul>
  <img src="git/staging.png">
  <p style="font-size: 10px;">Diagram from <a href="http://whygitisbetterthanx.com/" target="_blank">Why Git is Better than X</a>, MIT License</p>
</section>
<section class="slide">
  <h2>基本觀念：檔案狀態</h2>
  <ul>
    <li>untracked：沒有納入版本控制範圍內的檔案。</li>
    <li>unmodified / modified：沒有變動 / 有變動還沒有 Staging 的檔案。</li>
    <li>staged：Staging Area 中的檔案。</li>
  </ul>
  <img src="git/file-status.png">
</section>
<section class="slide">
  <h2>相關的指令（新增）</h2>
  <ul>
    <li><code>git add &lt;paths&gt;</code>：把檔案新增或變動加入 Staging Area。</li>
    <li><code>git status</code>：檢視檔案狀態。</li>
    <li><code>git commit</code>：開啟編輯器，確認變動並輸入訊息後送出 Commit。<br><small>指令中加 <code>-m 'Commit 訊息'</code> 就會直接 Commit</small></li>
    <li><code>git commit --amend</code>：「更動」上一次的 Commit<br>將上次 Commit 跟新的更動合併為新的 Commit。</li>
  </ul>
  <p><strong>小秘訣：</strong><code>git commit -a</code> 會將所有變更都加入 Staging Area 之後 Commit。（但還是建議您善用 Staging :P）</p>
</section>
<section class="slide">
  <h2>相關的指令（移除或補救）</h2>
  <img src="git/file-status.png" style="float: right; width: 450px;">
  <ul>
    <li><code>git reset HEAD &lt;paths&gt;</code>：把檔案中 Staging 的部份注銷掉。</small></li>
    <li><code>git rm &lt;paths&gt;</code>：將檔案從版本控制中移除後，刪除檔案。<br><small>加 <code>-r</code> 採遞迴方式，<code>--cached</code> 則不刪除原來檔案。</small></li>
    <li><code>git checkout -- &lt;paths&gt;</code>：恢復檔案為未更動的狀態（對 Staging 的部份無效）。</li>
  </ul>
</section>

<section class="slide">
  <h2>實例：第一個 Commit</h2>
  <p>用 <code>touch README</code> 建立一個空的 README 檔案後：</p>
  <p><code>git add README</code><br>
  <code>git commit -m 'First commit'</code></p>
  <p>這樣就會建立一個 Commit，將 README 納入版本控制之中。</p>
  <img src="git/first-commit.png">
</section>
<section class="slide">
  <h2>Commit 的內部結構</h2>
  <ul>
    <li>利用 <code>tree</code> 存放檔案一覽，將檔案存在 <code>blob</code> 裡。</li>
    <li>所有的資料都以 SHA1 checksum 標記，防止損毀或中途更改。</li>
    <li>Git 針對每個檔案版本獨立紀錄，而非只紀錄之間的差異，更具便利性。</li>
  </ul>
  <img src="git/commit-data.png" style="width: 450px;">
</section>

<section class="slide">
  <div class="vcenter">
    <p>Part 4</p>
    <h2>Tree Management</h2>
    <p>介紹 Git 樹狀的歷史管理方式，Branch 和 Tag 的使用，以及 Merge 和 Rebase 的概念。</p>
  </div>
</section>
<section class="slide">
  <h2>當 Commit 超過一個時&#8230;</h2>
  <ul>
    <li>Git 會用樹狀的方式紀錄 Commit 的繼承關係。</li>
    <li>其實踐方式就像是 Linked List，在每個 Commit 中記下他的 Parent。</li>
    <li>而 Git 允許 Commit 的分岔和合併，因此可以進行複雜的樹狀操作。</li>
  </ul>
  <img src="git/multiple-commits-data.png">
</section>
<section class="slide">
  <h2>Tag 與 Branch</h2>
  <p>在 Git 中，Tag 和 Branch <strong>是指向某一特定 Commit 的指標</strong>：</p>
  <ul>
    <li>Branch 是<strong>會動的</strong>：使用中的 Branch，指向的位置會在新 Commit 出現後自動移動。每一個 Repository 都會有一個預設的 Branch 叫 <code>master</code>。</li>
    <li>Tag 是<strong>不會動的</strong>：對某一個特定的 Commit 加上標記，指向位置不會隨新 Commit 出現更動。用於標記釋出版本或里程碑。</li>
  <img src="git/branch-sample.png">
</section>
<section class="slide">
  <h2>多個 Branch 的管理</h2>
  <ul>
    <li>Git 會使用 <code>HEAD</code> 指標去紀錄目前所使用的 Branch。</li>
    <li>可以隨時新增、切換和刪除 Branch（因為它只是指標！）</li>
    <li>如果不同的 Branch 落在岔開的分支，可以透過 Merge 「合起來」，或透過 Rebase 「接上去」。</li>
  </ul>
</section>

  <script type="text/javascript">
    $(document).ready(function() {
      $.deck('.slide');
    });
  </script>
<a href="." title="Permalink to this slide" class="deck-permalink">#</a>
</body>
</html>
